<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>1.0 으로 업그레이드</title>
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/custom.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
<script type="text/javascript" src="/assets/js/jquery-3.6.0.js"></script>
<script type="text/javascript" src="/assets/js/jquery-ui.js"></script>
<script>
    $(function () {
        let pathname = $(location).attr("pathname").endsWith("/") ?
            $(location).attr("pathname").substring(0, $(location).attr("pathname").length - 1) : $(location).attr("pathname")

        $("ul.nav").find("ul").css("display", "none");

        $("ul.nav").find("a").each(function() {
            let $this = $(this);
            console.log(pathname, $this.attr("href"))
            if (pathname === $this.attr("href")) {
                $this.addClass("selected");
                $this.parents("ul").css("display", "block");
            }
        })

        $("ul.nav").find("a").bind("click", function (e) {
            let $this = $(this);
            if (typeof (history.pushState) !== "undefined") {
                history.pushState(null, null, $this.attr("href"));
            }

            e.preventDefault();
            $("#content").load($this.attr("href") + " #content", function (html) {
                document.title = html.match("<title>(.*?)</title>")[1];
            });

            $this.parent().children("ul").toggle("blind", {}, 500);
        });

        $(".tabs").tabs();
    });
</script>

</head>
<body>
<nav>
    Developers | Guilde
</nav>

<section>
    <div class="container">
        <div style="width:20%;float:left;">
            <ul class="nav">
    
        <li>
<a href="/">NUGU developers 소개</a>
    
        <ul>
            
        </ul>
    
</li>
    
        <li>
<a href="/nugu-play">NUGU play</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder">Play Builder로 Play 만들기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/before-start">시작하기 전에 알면 좋은 것들</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/before-start/backend-proxy">Backend proxy</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/before-start/capability-interface">Capability interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/before-start/intents-and-entities">Intent와 Entity</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/before-start/play">Play</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/create-a-play-using-backend-proxy">외부 연동 서버 \(Backend proxy\) 연결하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/create-a-play-with-audioplayer">AudioPlayer Interface 지원하는 Play 만들기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/create-a-play-with-audioplayer/audioplayer-define-action">Action 정의하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/create-a-play-with-audioplayer/audioplayer-define-built-in-intent">Built-in Intent를 위한 Action 정의하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/create-a-play-with-audioplayer/audioplayer-define-custom-intent">Custom Intent 정의하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/customize-a-play">Play 설정하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action">Action 정의하기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/built-in-actions">Built-in Actions</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/manage-exceptions">예외 상황 관리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/response-with-branch-actions">Response + Branch Action (멀티턴 대화)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-branch-actions">Branch Action (Action Tree)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-common-actions">Common Action 사용하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters">Parameter</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters/configurable-parameter">Configurable Parameter</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters/define-a-parameter">Parameter 정의하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters/multi-entity-mapping">하나의 Parameter에 여러 Entity mapping 하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters/slot-filling-prompt">필수 Entity 정의하기 (Slot-Filling Prompt)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-parameters/write-responses">Parameter로 응답 작성하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-responses">Response</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-responses/use-directives">Directive 사용하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-an-action/use-responses/use-prompts">Prompt 사용하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-response-filters">Response Filter 사용하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-user-utterance-model">User Utterance Model 정의하기 (Intent &amp; Entity)</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-user-utterance-model/built-in-intents">Built-in Intent</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/define-user-utterance-model/how-to-write-customer-utterances">예상 발화 작성 가이드</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/hello-aria">아리아, 안녕!</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/hello-aria/create-a-play">1) Play 생성하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/hello-aria/create-an-action-and-an-answer">3) Action 만들고 응답 등록하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/hello-aria/create-an-intent-and-custom-utterances">2) Intent 만들고 예상 발화 등록하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/hello-aria/test-and-build-a-play">4) Play 테스트 및 빌드하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/link-oauth20">OAuth 2.0 연동하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/support-tools">지원 도구</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/support-tools/corpus-inspection-1">훈련 데이터 검증</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/support-tools/log-mining">실패 발화 분석</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/test-a-play">테스트하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy">Backend proxy 개발 가이드</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/backend-proxy-api-reference">Backend proxy API Reference</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/backend-proxy">Backend proxy 구축하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/capability-interfaces">Capability Interfaces</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/capability-interfaces/audioplayer-display-interface">AudioPlayer를 위한 Display Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/capability-interfaces/audioplayer-interface">AudioPlayer Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/capability-interfaces/display-interface">Display Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/create-plays-with-play-builder/use-backend-proxy/link-enrolled-user-api">Biz 사용자(Enrolled user) 정보 수신 연동</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play">Play 배포 및 관리하기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play/distribute-a-play">Play 배포</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play/manage-a-play">Play 관리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play/monitor-play-stats">Play 이용 통계 확인</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play/play-operation-policy">Play 운영 정책</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/distribute-and-manage-a-play/update-a-play">Play 업데이트</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/nugu-ux">Voice UX Design Guide</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/nugu-ux/design-a-dialog-flow">대화 흐름 디자인</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/nugu-ux/target-user-analysis-and-task-definition">기능 정의</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/nugu-ux/voice-interaction-design">사용자 발화\(User Utterance\) 예상 하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/nugu-ux/write-a-prompt">Prompt 디자인</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/play-registration-and-review">Play 정보 등록 및 심사 요청하기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/play-registration-and-review/modify-or-delete-play-information">Play 정보 수정 및 삭제</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/play-registration-and-review/play-review">Play 심사</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/play-registration-and-review/play-smarthome-play">Play 정보 등록 (smarthome play)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/play-registration-and-review/register-a-play">Play 정보 등록</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/releases">Release note</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play">Pre-built Play Builder로 스마트홈 Play 만들기</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomeattribute">SmartHomeAttribute</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability">SmartHomeCapability</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/airflowcontrol-interface">AirflowControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/airqualitycheck-interface">AirQualityCheck Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/brightnesscontrol-interface">BrightnessControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/chargecontrol-interface">ChargeControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/colorcontrol-interface">ColorControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/devicetemperaturecontrol-interface">DeviceTemperatureControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/humiditycontrol-interface">HumidityControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/modecontrol-interface">ModeControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/powercheck-interface">PowerCheck Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/powercontrol-interface">PowerControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/settimecontrol-interface">SetTimeControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/statecheck-interface">StateCheck Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomecapability/temperaturecontrol-interface">TemperatureControl Interface</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype">SmartHomeDeviceType</a>
    
        <ul>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-1">가스차단기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-10">스마트스위치</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-11">스마트플러그</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-12">식기세척기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-13">에너지미터</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-14">에어워셔</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-15">에어컨</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-16">열림감지센서</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-17">오븐</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-18">의류관리기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-19">정수기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-2">가습기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-20">제습기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-21">조명</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-3">건조기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-4-1">공기청정기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-4">공기센서</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-5">냉장고</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-6">로봇청소기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-7">보일러</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-8">선풍기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomedevicetype/type-9">세탁기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-play/smarthome-play/smarthomeerror">SmartHomeError</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
    
        <li>
<a href="/work-with-nugu-biz">NUGU biz kit</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/nugu-biz-concept">주요 개념</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/describebiz">체험판 및 정식판</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/private-play">Private Play</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/manage-shared-device">Biz 전용 디바이스 관리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/manage-enrolled-user">Biz 사용자 관리</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/manage-enrolled-user/enrolled-user-invitation-trial">Biz 사용자 초대 (체험판)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/manage-enrolled-user/enrolled-user-invitation-biz">Biz 사용자 초대 (정식판)</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/manage-enrolled-user/biz-nugu-app">Biz 사용자 설정 (NUGU APP)</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api">Biz API</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser">Biz 사용자 API</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz">Biz 사용자 그룹 관련</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz/api-enrolleduser-creategroup">Biz 사용자 그룹 생성</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz/api-enrolleduser-modgroup">Biz 사용자 그룹 수정</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz/api-enrolleduser-deletegroup">Biz 사용자 그룹 삭제</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz/api-enrolleduser-group-getlist">Biz 사용자 그룹 목록 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz/api-enrolleduser-group-getinfo">Biz 사용자 그룹 상세 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1">Biz 사용자 관련</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-invite">Biz 사용자 초대</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-moduser">Biz 사용자 수정</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-deleteuser">Biz 사용자 삭제</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-getlist">Biz 사용자 목록 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-getinfo">Biz 사용자 상세 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-getinviteinfo">Biz 사용자 초대 목록 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-enrolleduser/biz-1/api-enrolleduser-createtoken">Biz 사용자 API Token 생성</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-shareddevice">Biz 전용 디바이스 API</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-shareddevice/api-sharedevice-groupinquiry">전용 디바이스 그룹 조회</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-announcement">API 발송 \(Announcement\)</a>
    
        <ul>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-announcement/api-announcement-shareddevice">전용디바이스 그룹별 Announcement 전송</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-announcement/api-announcement-bizuser">Biz 사용자별 Announcement 전송</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/work-with-nugu-biz/biz-api/api-announcement/api-announcement-usergroup">Biz 사용자 그룹별 Announcement 전송</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
    
        <li>
<a href="/nugu-sdk">NUGU SDK</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/describetrial">체험판과 정식판</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/trialprocess">체험판 신청하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/manage-poc">PoC 관리하기</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/manage-poc/poc">PoC 관리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/manage-poc/statistic">이용 통계 확인</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/authentication">Authentication</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface">Capability Interface</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/capability-interface/asr">ASR</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/audioplayer">AudioPlayer</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/battery">Battery</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/bluetooth">Bluetooth</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/chips">Chips</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/display">Display</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/capability-interface/display/display-directive">Display-Directive</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/display/display-event">Display-Event</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/extension">Extension</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/location">Location</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/mediaplayer">MediaPlayer</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/message">Message</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/mic">Mic</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/phonecall">PhoneCall</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/routine">Routine</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/screen">Screen</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/session">Session</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/sound">Sound</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/speaker">Speaker</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/system">System</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/text">Text</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/tts">TTS</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/capability-interface/utility">Utility</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform">Platform</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/platform/android">Android</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/platform/android/dark-mode">Dark Mode 지원</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-display">NUGU Display의 노출과 제어</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-display/templatehandler">TemplateHandler</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-display/templaterenderer">TemplateRenderer</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-display/templateview">TemplateView</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-user-interface">NUGU 사용자 인터페이스</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/background">Background 동작 처리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/intro_components">구성요소</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/nugu-web-server">NUGU 서비스 관리 web server 연동</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/start">시작하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/android/testing_sdk_integration">테스트 환경 설정</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios">iOS</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/platform/ios/1.0">1.0 으로 업그레이드</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/dark-mode">Dark Mode 지원</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/background">Background 동작 처리</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/component">구성요소</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/nugu-display-template-server">NUGU Display의 노출과 제어</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/nugu">NUGU 사용자 인터페이스</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/start">시작하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/testing_sdk_integration">테스트 환경 설정</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/ios/web-server">NUGU 서비스 관리 web server 연동</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/linux">Linux</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/platform/linux/component">구성요소</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/platform/linux/start">시작하기</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/api-references">API References</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/source-code">Source code</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide">SDK UX Guide</a>
    
        <ul>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/booting">부팅화면</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/display-template">Display Template</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/error-handling">Error handling</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/nugu-device">NUGU 기기</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/nugu-inside">NUGU Inside</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/sdk-design-guide/voice-chrome">Voice Chrome</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
            
                <li>
<a href="/nugu-sdk/release-note">Release note</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
    
        <li>
<a href="/reference">관련정보</a>
    
        <ul>
            
                <li>
<a href="/reference/status">NUGU 대화 상태</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/reference/layer">Layer 정책</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/reference/register-icon">Icon 등록</a>
    
        <ul>
            
        </ul>
    
</li>
            
                <li>
<a href="/reference/list-of-unit-tags-supported-by-utterance-options">발화 옵션에서 UNIT 태그로 지원하는 단위</a>
    
        <ul>
            
        </ul>
    
</li>
            
        </ul>
    
</li>
    
        <li>
<a href="/terms">용어 정의</a>
    
        <ul>
            
        </ul>
    
</li>
    
</ul>
        </div>
        <div id="content" style="width:80%;float:left;">
<h1>1.0 으로 업그레이드</h1>


<div>
    <div class="warning">
    
<p>자세한 source code 변경사항은 github release note 를 참고해주세요.(<a href="https://github.com/nugu-developers/nugu-ios/releases/tag/1.0.0">https://github.com/nugu-developers/nugu-ios/releases/tag/1.0.</a></p>

</div>

<h2 id="notificationcenter-사용">NotificationCenter 사용</h2>

<p>NUGU SDK 의 구성요소에 대한 변경사항을 전달하기 위해 <code class="language-plaintext highlighter-rouge">DelegateSet</code> 대신 <code class="language-plaintext highlighter-rouge">NotificationCenter</code> 를 사용합니다.</p>

<div class="info">
    
<p><code class="language-plaintext highlighter-rouge">DelegateSet</code> 은 삭제되었으며, 기존에 <code class="language-plaintext highlighter-rouge">DelegateSet</code> 이 하던 역할을 delegate pattern 과 observer pattern 으로 구분하였습니다.</p>

</div>

<h3 id="asragent-변경사항-감지">ASRAgent 변경사항 감지</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-16">이전코드</a></li>
    
    </ul>
    
<div id="tab-16">
    <div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">asrAgent</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-26">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-26">
    <div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="n">asrResultObserver</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="nf">observe</span><span class="p">(</span><span class="kt">NuguAgentNotification</span><span class="o">.</span><span class="kt">ASR</span><span class="o">.</span><span class="kt">Result</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">queue</span><span class="p">:</span> <span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">notification</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">notification</span><span class="o">.</span><span class="n">result</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<h3 id="systemagent-변경사항-감지">SystemAgent 변경사항 감지</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-42">이전코드</a></li>
    
    </ul>
    
<div id="tab-42">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="n">client</span><span class="o">.</span><span class="n">systemAgent</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">systemAgentDelegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-52">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-52">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td>
<td class="rouge-code"><pre><span class="n">systemAgentExceptionObserver</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="nf">observe</span><span class="p">(</span><span class="kt">NuguAgentNotification</span><span class="o">.</span><span class="kt">System</span><span class="o">.</span><span class="kt">Exception</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">queue</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">notification</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">self</span> <span class="o">=</span> <span class="k">self</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
    
    <span class="k">switch</span> <span class="n">notification</span><span class="o">.</span><span class="n">code</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">systemAgentRevokeObserver</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="nf">observe</span><span class="p">(</span><span class="kt">NuguAgentNotification</span><span class="o">.</span><span class="kt">System</span><span class="o">.</span><span class="kt">RevokeDevice</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">queue</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">notification</span><span class="p">)</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<h3 id="dialogstateaggregator-변경사항-감지">DialogStateAggregator 변경사항 감지</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-74">이전코드</a></li>
    
    </ul>
    
<div id="tab-74">
    <div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">dialogStateAggregator</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-84">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-84">
    <div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="n">dialogStateObserver</span> <span class="o">=</span> <span class="n">object</span><span class="o">.</span><span class="nf">observe</span><span class="p">(</span><span class="kt">NuguClientNotification</span><span class="o">.</span><span class="kt">DialogState</span><span class="o">.</span><span class="kt">State</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">queue</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">notification</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">notification</span><span class="o">.</span><span class="n">state</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<h2 id="nuguclientbuilder-추가">NuguClient.Builder 추가</h2>

<p>NuguClient 의 필수/선택 요소를 보다 효율적으로 생성하기 위해 builder pattern 이 적용되었습니다.</p>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-102">이전코드</a></li>
    
    </ul>
    
<div id="tab-102">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="kd">lazy</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">client</span><span class="p">:</span> <span class="kt">NuguClient</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="kt">NuguClient</span><span class="p">(</span><span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
    
    <span class="o">...</span>
    
    <span class="k">return</span> <span class="n">client</span>
<span class="p">}()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-118">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-118">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
<td class="rouge-code"><pre>    <span class="kd">lazy</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">client</span><span class="p">:</span> <span class="kt">NuguClient</span> <span class="o">=</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">nuguBuilder</span> <span class="o">=</span> <span class="kt">NuguClient</span><span class="o">.</span><span class="kt">Builder</span><span class="p">()</span>

        <span class="o">...</span>
        
        <span class="c1">// Set DataSource for SoundAgent</span>
        <span class="n">nuguBuilder</span><span class="o">.</span><span class="nf">setDataSource</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        <span class="c1">// Set Delegate for PhoneCallAgent, MessageAgent, MediaPlayerAgent,</span>
        <span class="c1">// ExtensionAgent, LocationAgent, PermissionAgent</span>
        <span class="n">nuguBuilder</span><span class="o">.</span><span class="nf">setDelegate</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        
        <span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="n">nuguBuilder</span><span class="o">.</span><span class="nf">build</span><span class="p">()</span>
        <span class="n">client</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        
        <span class="k">return</span> <span class="n">client</span>
    <span class="p">}()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<h2 id="speechrecognizeraggregator-추가">SpeechRecognizerAggregator 추가</h2>

<p>NUGU SDK 의 <code class="language-plaintext highlighter-rouge">SpeechRecognizerAggregator</code> 가 <code class="language-plaintext highlighter-rouge">MicInputProvider</code>, <code class="language-plaintext highlighter-rouge">ASRAgent</code>, <code class="language-plaintext highlighter-rouge">KeywordDetector</code> 를 통합 관리합니다.</p>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-147">이전코드</a></li>
    
    </ul>
    
<div id="tab-147">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre></td>
<td class="rouge-code"><pre><span class="kd">private</span> <span class="k">var</span> <span class="nv">startMicWorkItem</span><span class="p">:</span> <span class="kt">DispatchWorkItem</span><span class="p">?</span>

<span class="c1">// Audio input source</span>
<span class="kd">private</span> <span class="k">let</span> <span class="nv">micQueue</span> <span class="o">=</span> <span class="kt">DispatchQueue</span><span class="p">(</span><span class="nv">label</span><span class="p">:</span> <span class="s">"central_manager_mic_input_queue"</span><span class="p">)</span>
<span class="kd">private</span> <span class="k">let</span> <span class="nv">micInputProvider</span> <span class="o">=</span> <span class="kt">MicInputProvider</span><span class="p">()</span>
 
<span class="kd">func</span> <span class="nf">enable</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">...</span>

     <span class="c1">// Set Last WakeUp Keyword</span>
     <span class="c1">// If you don't want to use saved wakeup-word, don't need to be implemented</span>
     <span class="k">if</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">useWakeUpDetector</span><span class="p">,</span>
         <span class="k">let</span> <span class="nv">keyword</span> <span class="o">=</span> <span class="kt">Keyword</span><span class="p">(</span><span class="nv">rawValue</span><span class="p">:</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">wakeUpWord</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">client</span><span class="o">.</span><span class="n">keywordDetector</span><span class="o">.</span><span class="n">keywordSource</span> <span class="o">=</span> <span class="n">keyword</span><span class="o">.</span><span class="n">keywordSource</span>
         <span class="nf">startWakeUpDetector</span><span class="p">()</span>

         <span class="n">startMicWorkItem</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
         <span class="n">startMicWorkItem</span> <span class="o">=</span> <span class="kt">DispatchWorkItem</span><span class="p">(</span><span class="nv">block</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
             <span class="n">log</span><span class="o">.</span><span class="nf">debug</span><span class="p">(</span><span class="s">"startMicWorkItem start"</span><span class="p">)</span>
             <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="nf">startMicInputProvider</span><span class="p">(</span><span class="nv">requestingFocus</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">success</span><span class="p">)</span> <span class="k">in</span>
                 <span class="k">guard</span> <span class="n">success</span> <span class="k">else</span> <span class="p">{</span>
                     <span class="n">log</span><span class="o">.</span><span class="nf">debug</span><span class="p">(</span><span class="s">"startMicWorkItem failed!"</span><span class="p">)</span>
                     <span class="k">return</span>
                 <span class="p">}</span>
             <span class="p">}</span>
         <span class="p">})</span>
         <span class="k">guard</span> <span class="k">let</span> <span class="nv">startMicWorkItem</span> <span class="o">=</span> <span class="n">startMicWorkItem</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
         <span class="c1">// When mic has been activated before interruption end notification has been fired,</span>
         <span class="c1">// Option's .shouldResume factor never comes in. (even when it has to be)</span>
         <span class="c1">// Giving small delay for starting mic can be a solution for this situation</span>
         <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">()</span><span class="o">.</span><span class="nf">asyncAfter</span><span class="p">(</span><span class="nv">deadline</span><span class="p">:</span> <span class="o">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="nv">execute</span><span class="p">:</span> <span class="n">startMicWorkItem</span><span class="p">)</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nf">stopWakeUpDetector</span><span class="p">()</span>
         <span class="nf">stopMicInputProvider</span><span class="p">()</span>
     <span class="p">}</span>
 <span class="p">}</span>

<span class="kd">func</span> <span class="nf">startMicInputProvider</span><span class="p">(</span><span class="nv">requestingFocus</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">startMicWorkItem</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
     <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
         <span class="k">guard</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">applicationState</span> <span class="o">==</span> <span class="o">.</span><span class="n">active</span> <span class="k">else</span> <span class="p">{</span>
             <span class="nf">completion</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
             <span class="k">return</span>
         <span class="p">}</span>

         <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">requestRecordPermission</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="n">isGranted</span> <span class="k">in</span>
             <span class="k">guard</span> <span class="n">isGranted</span> <span class="k">else</span> <span class="p">{</span>
                 <span class="n">log</span><span class="o">.</span><span class="nf">error</span><span class="p">(</span><span class="s">"Record permission denied"</span><span class="p">)</span>
                 <span class="nf">completion</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
                 <span class="k">return</span>
             <span class="p">}</span>
             <span class="k">self</span><span class="o">.</span><span class="n">micQueue</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
                 <span class="k">defer</span> <span class="p">{</span>
                     <span class="n">log</span><span class="o">.</span><span class="nf">debug</span><span class="p">(</span><span class="s">"addEngineConfigurationChangeNotification"</span><span class="p">)</span>
                     <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">registerAudioEngineConfigurationObserver</span><span class="p">()</span>
                 <span class="p">}</span>
                 <span class="k">self</span><span class="o">.</span><span class="n">micInputProvider</span><span class="o">.</span><span class="nf">stop</span><span class="p">()</span>

                 <span class="c1">// Control center does not work properly when mixWithOthers option has been included.</span>
                 <span class="c1">// To avoid adding mixWithOthers option when audio player is in paused state,</span>
                 <span class="c1">// update audioSession should be done only when requesting focus</span>
                 <span class="k">if</span> <span class="n">requestingFocus</span> <span class="p">{</span>
                     <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">updateAudioSession</span><span class="p">(</span><span class="nv">requestingFocus</span><span class="p">:</span> <span class="n">requestingFocus</span><span class="p">)</span>
                 <span class="p">}</span>
                 <span class="k">do</span> <span class="p">{</span>
                     <span class="k">try</span> <span class="k">self</span><span class="o">.</span><span class="n">micInputProvider</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span>
                     <span class="nf">completion</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
                 <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
                     <span class="n">log</span><span class="o">.</span><span class="nf">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                     <span class="nf">completion</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
                 <span class="p">}</span>
             <span class="p">}</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>

 <span class="kd">func</span> <span class="nf">stopMicInputProvider</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">micQueue</span><span class="o">.</span><span class="n">sync</span> <span class="p">{</span>
         <span class="n">startMicWorkItem</span><span class="p">?</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
         <span class="n">micInputProvider</span><span class="o">.</span><span class="nf">stop</span><span class="p">()</span>
         <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">removeAudioEngineConfigurationObserver</span><span class="p">()</span>
     <span class="p">}</span>
 <span class="p">}</span>
 
 <span class="kd">func</span> <span class="nf">startWakeUpDetector</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">client</span><span class="o">.</span><span class="n">keywordDetector</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span>
 <span class="p">}</span>
 
 <span class="kd">func</span> <span class="nf">stopWakeUpDetector</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">client</span><span class="o">.</span><span class="n">keywordDetector</span><span class="o">.</span><span class="nf">stop</span><span class="p">()</span>
 <span class="p">}</span>
 
 <span class="kd">func</span> <span class="nf">startRecognition</span><span class="p">(</span><span class="nv">initiator</span><span class="p">:</span> <span class="kt">ASRInitiator</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">client</span><span class="o">.</span><span class="n">asrAgent</span><span class="o">.</span><span class="nf">startRecognition</span><span class="p">(</span><span class="nv">initiator</span><span class="p">:</span> <span class="n">initiator</span><span class="p">)</span>
 <span class="p">}</span>

 <span class="kd">func</span> <span class="nf">stopRecognition</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">client</span><span class="o">.</span><span class="n">asrAgent</span><span class="o">.</span><span class="nf">stopRecognition</span><span class="p">()</span>
 <span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-255">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-255">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td>
<td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">startListening</span><span class="p">(</span><span class="nv">initiator</span><span class="p">:</span> <span class="kt">ASRInitiator</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span><span class="o">.</span><span class="n">speechRecognizerAggregator</span><span class="o">.</span><span class="nf">startListening</span><span class="p">(</span><span class="nv">initiator</span><span class="p">:</span> <span class="n">initiator</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">startListeningWithTrigger</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">client</span><span class="o">.</span><span class="n">speechRecognizerAggregator</span><span class="o">.</span><span class="nf">startListeningWithTrigger</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">stopListening</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">client</span><span class="o">.</span><span class="n">speechRecognizerAggregator</span><span class="o">.</span><span class="nf">stopListening</span><span class="p">()</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<p><code class="language-plaintext highlighter-rouge">KeywordDetector</code>, <code class="language-plaintext highlighter-rouge">MicInputProvider</code> , <code class="language-plaintext highlighter-rouge">ASRAgent</code> 시작/종료와 관련된 코드를 모두 제거하고<code class="language-plaintext highlighter-rouge">SpeechRecognizerAggregator</code> 의 <code class="language-plaintext highlighter-rouge">startListening(initiator:)</code>, <code class="language-plaintext highlighter-rouge">startListeningWithTrigger</code>, <code class="language-plaintext highlighter-rouge">stopListening</code> 함수 호출로 대체합니다.</p>

<h3 id="keyword-설정">Keyword 설정</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-279">이전코드</a></li>
    
    </ul>
    
<div id="tab-279">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td>
<td class="rouge-code"><pre> <span class="c1">// Set Last WakeUp Keyword</span>
 <span class="c1">// If you don't want to use saved wakeup-word, don't need to be implemented</span>
 <span class="k">if</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">useWakeUpDetector</span><span class="p">,</span>
     <span class="k">let</span> <span class="nv">keyword</span> <span class="o">=</span> <span class="kt">Keyword</span><span class="p">(</span><span class="nv">rawValue</span><span class="p">:</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">wakeUpWord</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">client</span><span class="o">.</span><span class="n">keywordDetector</span><span class="o">.</span><span class="n">keywordSource</span> <span class="o">=</span> <span class="n">keyword</span><span class="o">.</span><span class="n">keywordSource</span>
 <span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-294">1.0 에서 변경된 코드</a></li>
    
    </ul>
    
<div id="tab-294">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td>
<td class="rouge-code"><pre><span class="c1">// Set Last WakeUp Keyword</span>
<span class="c1">// If you don't want to use saved wakeup-word, don't need to be implemented.</span>
<span class="c1">// Because `aria` is set as a default keyword</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">keyword</span> <span class="o">=</span> <span class="kt">Keyword</span><span class="p">(</span><span class="nv">rawValue</span><span class="p">:</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">wakeUpWord</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">nuguBuilder</span><span class="o">.</span><span class="n">keywordDetector</span><span class="o">.</span><span class="n">keyword</span> <span class="o">=</span> <span class="n">keyword</span>
<span class="p">}</span>

<span class="c1">// If you want to use built-in keyword detector, set this value as true</span>
<span class="n">nuguBuilder</span><span class="o">.</span><span class="n">speechRecognizerAggregator</span><span class="o">.</span><span class="n">useKeywordDetector</span> <span class="o">=</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="kt">Standard</span><span class="o">.</span><span class="n">useWakeUpDetector</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<p>Keyword(e.g. “아리아”) 관련 설정을 <code class="language-plaintext highlighter-rouge">KeywordDetector</code> 대신 <code class="language-plaintext highlighter-rouge">SpeechRecognizerAggregator</code> 에 적용합니다.</p>

<h2 id="sdk-에서-avaudiosessionmanager-를-관리">SDK 에서 AVAudioSessionManager 를 관리</h2>

<p>NUGU SDK 를 사용하기 위해서는 시스템, Application, NUGU SDK 의 복합적인 상황에 맞춰 AVAudioSession 의 <code class="language-plaintext highlighter-rouge">category</code>, <code class="language-plaintext highlighter-rouge">categoryOptions</code> 와 <code class="language-plaintext highlighter-rouge">AVAudioSession.interruptionNotification</code> , <code class="language-plaintext highlighter-rouge">AVAudioSession.routeChangeNotification</code> 등을 적절하게 처리해 주어야 합니다.</p>

<p>SDK 1.0 에 추가된 <code class="language-plaintext highlighter-rouge">AudioSessionManager</code> 는 NUGU SDK 를 사용하기 위한 기본적인 AVAudioSession 처리를 구현하고 있습니다.</p>

<div class="warning">
    
<p>AVAudioSession 이 이미 Application 에서 충분히 복잡하게 관리되고 있다면, <code class="language-plaintext highlighter-rouge">AudioSessionManager</code> 를 사용하는 것보다 기존의 관리 로직에 NUGU SDK 를 위한 로직을 추가하는 방향이 더욱 효율적일 수 있습니다.</p>

<p><a href="1.0.md#custom-audiosessionmanager">Custom AudioSessionManager</a> 를 참고해주세요.</p>

</div>

<h3 id="sdk-의-audiosessionmanager-사용">SDK 의 AudioSessionManager 사용</h3>

<p>Application 의 <code class="language-plaintext highlighter-rouge">NuguAudioSessionManager.swift</code> 파일 및 관련 코드를 삭제합니다.</p>

<div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="n">client</span><span class="o">.</span><span class="n">audioSessionManager</span><span class="p">?</span><span class="o">.</span><span class="nf">enable</span><span class="p">()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<p><code class="language-plaintext highlighter-rouge">AudioSessionManager</code> 가 <code class="language-plaintext highlighter-rouge">AVAudioSession.interruptionNotification</code> , <code class="language-plaintext highlighter-rouge">AVAudioSession.routeChangeNotification</code> event 를 감지합니다.</p>

<p>NUGU SDK 를 사용하는 동안 event 를 감지하여 SDK 동작에 필요한 기능을 수행합니다.</p>

<div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="n">client</span><span class="o">.</span><span class="n">audioSessionManager</span><span class="p">?</span><span class="o">.</span><span class="nf">disable</span><span class="p">()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<p><code class="language-plaintext highlighter-rouge">AudioSessionManager</code> 가 <code class="language-plaintext highlighter-rouge">AVAudioSession.interruptionNotification</code> , <code class="language-plaintext highlighter-rouge">AVAudioSession.routeChangeNotification</code> event 감지를 중지합니다.</p>

<p>NUGU SDK 를 사용하지 않을 때 호출하여 SDK 가 불필요한 동작을 수행하지 않도록합니다.</p>

<h3 id="custom-audiosessionmanager-사용">Custom AudioSessionManager 사용</h3>

<p>NUGU SDK 의 <code class="language-plaintext highlighter-rouge">AudioSessionManager</code> 를 사용하지 않고 Application 에서 <code class="language-plaintext highlighter-rouge">AVAudioSession</code> 을 직접 처리할 수 있습니다.</p>

<div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
<td class="rouge-code"><pre><span class="kd">lazy</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">client</span><span class="p">:</span> <span class="kt">NuguClient</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">nuguBuilder</span> <span class="o">=</span> <span class="kt">NuguClient</span><span class="o">.</span><span class="kt">Builder</span><span class="p">()</span>

    <span class="o">...</span>
    
    <span class="n">nuguBuilder</span><span class="o">.</span><span class="n">audioSessionManager</span> <span class="o">=</span> <span class="kc">nil</span>
    
    <span class="o">...</span>
    
    <span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="n">nuguBuilder</span><span class="o">.</span><span class="nf">build</span><span class="p">()</span>
    <span class="n">client</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    
    <span class="o">...</span>
    
    <span class="k">return</span> <span class="n">client</span>
<span class="p">}()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<p><code class="language-plaintext highlighter-rouge">NuguClient</code> 생성시 <code class="language-plaintext highlighter-rouge">audioSessionManager</code> 를 nil 처리합니다.</p>

<div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
<td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">NuguCentralManager</span><span class="p">:</span> <span class="kt">NuguClientDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">nuguClientWillUseMic</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">requestingFocus</span> <span class="p">{</span>
            <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">updateAudioSession</span><span class="p">(</span><span class="nv">requestingFocus</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">nuguClientWillRequireAudioSession</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">updateAudioSession</span><span class="p">(</span><span class="nv">requestingFocus</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">nuguClientDidReleaseAudioSession</span><span class="p">()</span> <span class="p">{</span>
        <span class="kt">NuguAudioSessionManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">notifyAudioSessionDeactivation</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="o">...</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<p>NUGU SDK iOS 0.x 의 <a href="https://github.com/nugu-developers/nugu-ios/blob/0.30.1/SampleApp/Sources/Manager/NuguAudioSessionManager.swift">NuguAudioSessionManager.swift</a> 를 참고하여 Application 에서 AudioSessionManager 를 직접 구현하고 <code class="language-plaintext highlighter-rouge">NuguClientDelegate</code> 의 일부 함수를 구현해 주어야 합니다.</p>

<h2 id="voicechromepresenter-기능-추가">VoiceChromePresenter 기능 추가</h2>

<h3 id="uitapgesturerecognizer-구현-이동">UITapGestureRecognizer 구현 이동</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-405">삭제해야 하는 코드</a></li>
    
    </ul>
    
<div id="tab-405">
    <div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td>
<td class="rouge-code"><pre><span class="kd">@objc</span> <span class="kd">private</span> <span class="kd">extension</span> <span class="kt">MainViewController</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">didTapForStopRecognition</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="p">[</span><span class="o">.</span><span class="n">listening</span><span class="p">,</span> <span class="o">.</span><span class="n">recognizing</span><span class="p">]</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">asrAgent</span><span class="o">.</span><span class="n">asrState</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">asrAgent</span><span class="o">.</span><span class="nf">stopRecognition</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">initializeNugu</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">tapGestureRecognizer</span> <span class="o">=</span> <span class="kt">UITapGestureRecognizer</span><span class="p">(</span><span class="nv">target</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">didTapForStopRecognition</span><span class="kd">)</span><span class="p">)</span>
    <span class="n">tapGestureRecognizer</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
    <span class="n">tapGestureRecognizer</span><span class="o">.</span><span class="n">cancelsTouchesInView</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">view</span><span class="o">.</span><span class="nf">addGestureRecognizer</span><span class="p">(</span><span class="n">tapGestureRecognizer</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">extension</span> <span class="kt">MainViewController</span><span class="p">:</span> <span class="kt">UIGestureRecognizerDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">gestureRecognizer</span><span class="p">(</span><span class="n">_</span> <span class="nv">gestureRecognizer</span><span class="p">:</span> <span class="kt">UIGestureRecognizer</span><span class="p">,</span> <span class="n">shouldReceive</span> <span class="nv">touch</span><span class="p">:</span> <span class="kt">UITouch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">touchLocation</span> <span class="o">=</span> <span class="n">touch</span><span class="o">.</span><span class="nf">location</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">gestureRecognizer</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">!</span><span class="n">nuguVoiceChrome</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">touchLocation</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">gestureRecognizer</span><span class="p">(</span><span class="n">_</span> <span class="nv">gestureRecognizer</span><span class="p">:</span> <span class="kt">UIGestureRecognizer</span><span class="p">,</span> <span class="n">shouldRecognizeSimultaneouslyWith</span> <span class="nv">otherGestureRecognizer</span><span class="p">:</span> <span class="kt">UIGestureRecognizer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<p><code class="language-plaintext highlighter-rouge">UITapGestureRecognizer</code> 관련 기능을 <code class="language-plaintext highlighter-rouge">VoiceChromePresenter</code> 에서 처리하기 때문에 Application 에서 관련 코드를 삭제합니다.</p>

<h3 id="asrbeepplayer-구현-이동">ASRBeepPlayer 구현 이동</h3>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-440">삭제해야 하는 코드</a></li>
    
    </ul>
    
<div id="tab-440">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kd">lazy</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">asrBeepPlayer</span><span class="p">:</span> <span class="kt">ASRBeepPlayer</span> <span class="o">=</span> <span class="kt">ASRBeepPlayer</span><span class="p">(</span><span class="nv">focusManager</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">focusManager</span><span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td>
<td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">MainViewController</span><span class="p">:</span> <span class="kt">DialogStateDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">dialogStateDidChange</span><span class="p">(</span><span class="n">_</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">DialogState</span><span class="p">,</span> <span class="nv">isMultiturn</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">chips</span><span class="p">:</span> <span class="p">[</span><span class="kt">ChipsAgentItem</span><span class="o">.</span><span class="kt">Chip</span><span class="p">]?,</span> <span class="nv">sessionActivated</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">listening</span><span class="p">:</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
                <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">asrBeepPlayer</span><span class="o">.</span><span class="nf">beep</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">thinking</span><span class="p">:</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
                <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">nuguButton</span><span class="o">.</span><span class="nf">pauseDeactivateAnimation</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">MainViewController</span><span class="p">:</span> <span class="kt">ASRAgentDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">asrAgentDidReceive</span><span class="p">(</span><span class="nv">result</span><span class="p">:</span> <span class="kt">ASRResult</span><span class="p">,</span> <span class="nv">dialogRequestId</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">complete</span><span class="p">:</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
                <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">asrBeepPlayer</span><span class="o">.</span><span class="nf">beep</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">success</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">error</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
                <span class="k">switch</span> <span class="n">error</span> <span class="p">{</span>
                <span class="k">case</span> <span class="kt">ASRError</span><span class="o">.</span><span class="nv">listenFailed</span><span class="p">:</span>
                    <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">asrBeepPlayer</span><span class="o">.</span><span class="nf">beep</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">fail</span><span class="p">)</span>
                <span class="k">case</span> <span class="kt">ASRError</span><span class="o">.</span><span class="nv">recognizeFailed</span><span class="p">:</span>
                    <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">localTTSAgent</span><span class="o">.</span><span class="nf">playLocalTTS</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">deviceGatewayRequestUnacceptable</span><span class="p">)</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">asrBeepPlayer</span><span class="o">.</span><span class="nf">beep</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">fail</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">default</span><span class="p">:</span> <span class="k">break</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<p>Beep 음 재생과 관련된 기능을 <code class="language-plaintext highlighter-rouge">VoiceChromePresenter</code> 에서 처리하기 때문에 Application 의 <code class="language-plaintext highlighter-rouge">ASRBeepPlayer.swift</code> 파일 및 <code class="language-plaintext highlighter-rouge">asrBeepPlayer.beep(type:)</code> 호출 코드를 삭제합니다.</p>

<h2 id="controlcentermanager-추가">ControlCenterManager 추가</h2>

<p>AudioPlayerAgent 를 사용하여 음악을 재생하는 경우 SDK 의 <code class="language-plaintext highlighter-rouge">ControlCenterManager</code> 에서 <code class="language-plaintext highlighter-rouge">MPNowPlayingInfoCenter</code> 를 통해 재생정보를 iOS platform 으로 전달합니다.</p>

<div class="tabs">
    <ul>
    
        <li><a href="#tab-500">삭제해야 하는 코드</a></li>
    
    </ul>
    
<div id="tab-500">
    <div class="code">
    <div class="code_title">NuguCentralManager.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="k">let</span> <span class="nv">displayPlayerController</span> <span class="o">=</span> <span class="kt">NuguDisplayPlayerController</span><span class="p">()</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

<div class="code">
    <div class="code_title">MainViewController.swift</div>
    <div class="code_body">
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
<td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">MainViewController</span><span class="p">:</span> <span class="kt">AudioDisplayViewPresenterDelegate</span> <span class="p">{</span>
     <span class="kd">func</span> <span class="nf">displayControllerShouldUpdateTemplate</span><span class="p">(</span><span class="nv">template</span><span class="p">:</span> <span class="kt">AudioPlayerDisplayTemplate</span><span class="p">)</span> <span class="p">{</span>
         <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">displayPlayerController</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
     <span class="p">}</span>

     <span class="kd">func</span> <span class="nf">displayControllerShouldUpdateState</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">AudioPlayerState</span><span class="p">)</span> <span class="p">{</span>
         <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">displayPlayerController</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
     <span class="p">}</span>

     <span class="kd">func</span> <span class="nf">displayControllerShouldUpdateDuration</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
         <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">displayPlayerController</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
     <span class="p">}</span>

     <span class="kd">func</span> <span class="nf">displayControllerShouldRemove</span><span class="p">()</span> <span class="p">{</span>
         <span class="kt">NuguCentralManager</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">displayPlayerController</span><span class="o">.</span><span class="nf">remove</span><span class="p">()</span>
     <span class="p">}</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
</div>
</div>

</div>


</div>

<p><code class="language-plaintext highlighter-rouge">MPNowPlayingInfoCenter</code> 관련 기능을 <code class="language-plaintext highlighter-rouge">AudioDisplayViewPresenter</code> 와 <code class="language-plaintext highlighter-rouge">ControlCenterManager</code> 에서 처리하기 때문에 Application 의 <code class="language-plaintext highlighter-rouge">NuguDisplayPlayerController.swift</code> 및 관련 코드를 삭제합니다.</p>

</div>


<div>
    <div style="width:50%;float:left;">
        
        <p>iOS</p>
        
    </div>
    <div style="width:50%;float:right;">
        
        <p>Dark Mode 지원</p>
        
    </div>
</div>
</div>
    </div>
</section>
<footer style="clear: both;">
    © to me
</footer>

</body>
</html>
